<!DOCTYPE html>
<html lang="en">

<head>
    <script type="module">
        const ATTACHEDS = {
            attacheds: ['https://www.assemblyscript.org/', 'https://www.assemblyscript.org/'],
            keyAttached: '01010101010101010101010101010110'
        }

        import { MessageContentV1Pack, MessageContentV1Unpack } from "./build/release.js";

        const subjectBytes = new TextEncoder().encode("Subject");
        const bodyBytes = new TextEncoder().encode("odyBodyBodyBodyBodyBodyBodyBodyBodyB");
        const signature = new TextEncoder().encode("Signature");
        const attacheds = new TextEncoder().encode(`${ATTACHEDS}`);
        const previousMessageAddress = new TextEncoder().encode("0:4758012a7dfd31bef6203721d11f9d5de07d4150d011090c9ba2fadc28343712");

        if (subjectBytes.length < 1024 && attacheds.length < 1024 && signature.length < 1024) {
            const message = MessageContentV1Pack(subjectBytes, signature, attacheds, previousMessageAddress, bodyBytes)
            console.log(message)


            const version = MessageContentV1Unpack(message)
            console.log(version)
        }


        console.log("====")
        console.log(subjectBytes)
        console.log(signature)
        console.log(attacheds)
        console.log(previousMessageAddress)
        console.log(bodyBytes)

    </script>
</head>

<body></body>

</html>